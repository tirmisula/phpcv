<script>  
function setImagePreview()   
{  
        var docObj=document.getElementById("file");   
        var imgObjPreview=document.getElementById("preview");  
        if(docObj.files &&    docObj.files[0])  
        {  
            //火狐下，直接设img属性  
            imgObjPreview.style.display = 'block';  
            imgObjPreview.style.width = '200px';  
            imgObjPreview.style.height = '200px';                      
           //imgObjPreview.src = docObj.files[0].getAsDataURL();  
           //火狐7以上版本不能用上面的getAsDataURL()方式获取，需要一下方式    
            imgObjPreview.src = window.URL.createObjectURL(docObj.files[0]);  
        }  
        else  
        {  
            //IE下，使用滤镜  
            docObj.select();  
            var imgSrc = document.selection.createRange().text;  
            var localImagId = document.getElementById("localImag");  
            //必须设置初始大小  
            localImagId.style.width = "300px";  
            localImagId.style.height = "120px";  
            //图片异常的捕捉，防止用户修改后缀来伪造图片  
            try  
            {  
                localImagId.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";  
                localImagId.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = imgSrc;  
            }  
            catch(e)  
            {  
                alert("您上传的图片格式不正确，请重新选择!");  
                return false;  
            }  
                imgObjPreview.style.display = 'none';  
                document.selection.empty();  
         }  
         return true;  
 }
function setImagePreview_()
{
    var docObj=document.getElementById("file_");
    var imgObjPreview=document.getElementById("preview_");
    if(docObj.files &&    docObj.files[0])
    {
        //火狐下，直接设img属性
        imgObjPreview.style.display = 'block';
        imgObjPreview.style.width = '200px';
        imgObjPreview.style.height = '200px';
        //imgObjPreview.src = docObj.files[0].getAsDataURL();
        //火狐7以上版本不能用上面的getAsDataURL()方式获取，需要一下方式
        imgObjPreview.src = window.URL.createObjectURL(docObj.files[0]);
    }
    else
    {
        //IE下，使用滤镜
        docObj.select();
        var imgSrc = document.selection.createRange().text;
        var localImagId = document.getElementById("localImag_");
        //必须设置初始大小
        localImagId.style.width = "300px";
        localImagId.style.height = "120px";
        //图片异常的捕捉，防止用户修改后缀来伪造图片
        try
        {
            localImagId.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";
            localImagId.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = imgSrc;
        }
        catch(e)
        {
            alert("您上传的图片格式不正确，请重新选择!");
            return false;
        }
        imgObjPreview.style.display = 'none';
        document.selection.empty();
    }
    return true;
}
</script>  
  
<html>  
<body>  
  
<form action="php2python.php" method="post" enctype="multipart/form-data">  
    <label for="file">Filename1:</label>
    <input type="file" name="file" id="file" onchange="javascript:setImagePreview();">  
    <div id="localImag"><img id="preview" width=-1 height=-1 style="diplay:none" /></div>  
    <br>
    <label for="file">Filename1:</label>
    <input type="file" name="file_" id="file_" onchange="javascript:setImagePreview_()">
    <div id="localImag_"><img id="preview_" width=-1 height=-1 style="diplay:none" /></div>
    <br>
    <input type="submit" name="submit" value="Submit" />  
</form>  
  
</body>  
</html>  